/* =========================================================
   PaperStack Component Styles
   ========================================================= */

.paper-stack {
  @apply relative;
  isolation: isolate; /* fixes z-index stacking */
  --stack-offset: 12px;
  --stack-rotation: 1deg;
}

/* Offset Variants */
.paper-stack-offset-sm {
  --stack-offset: 8px;
  --stack-rotation: 0.5deg;
}

.paper-stack-offset-md {
  --stack-offset: 12px;
  --stack-rotation: 1deg;
}

.paper-stack-offset-lg {
  --stack-offset: 16px;
  --stack-rotation: 1.5deg;
}

/* Paper Stack Layers */
.paper-stack-layer {
  @apply absolute bg-white rounded-lg border border-gray-200;
  inset: 0;
  pointer-events: none;
  transform-origin: center;
}

/* Proper depth ordering */
.paper-stack-layer-1 { z-index: 1; }
.paper-stack-layer-2 { z-index: 2; }
.paper-stack-layer-3 { z-index: 3; }
.paper-stack-layer-4 { z-index: 4; }

/* Translation only (no padding hacks) */
.paper-stack-layer-1 {
  transform: translate(
    calc(var(--stack-offset) * 0.25),
    calc(var(--stack-offset) * 0.25)
  );
}

.paper-stack-layer-2 {
  transform: translate(
    calc(var(--stack-offset) * 0.5),
    calc(var(--stack-offset) * 0.5)
  );
}

.paper-stack-layer-3 {
  transform: translate(
    calc(var(--stack-offset) * 0.75),
    calc(var(--stack-offset) * 0.75)
  );
}

.paper-stack-layer-4 {
  transform: translate(
    var(--stack-offset),
    var(--stack-offset)
  );
}

/* Rotated Stacks */
.paper-stack-rotated .paper-stack-layer-1 {
  rotate: -0.3deg;
}

.paper-stack-rotated .paper-stack-layer-2 {
  rotate: 0.4deg;
}

.paper-stack-rotated .paper-stack-layer-3 {
  rotate: -0.6deg;
}

.paper-stack-rotated .paper-stack-layer-4 {
  rotate: 0.8deg;
}

/* Content Layer */
.paper-stack-content {
  @apply relative bg-white rounded-lg p-6 border border-gray-200;
  z-index: 10;
}

/* Shadow Variants */
.paper-stack-shadow-none .paper-stack-layer,
.paper-stack-shadow-none .paper-stack-content {
  box-shadow: none;
}

.paper-stack-shadow-soft .paper-stack-layer,
.paper-stack-shadow-soft .paper-stack-content {
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.paper-stack-shadow-medium .paper-stack-layer,
.paper-stack-shadow-medium .paper-stack-content {
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
}

.paper-stack-shadow-hard .paper-stack-layer,
.paper-stack-shadow-hard .paper-stack-content {
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
}

/* ================================
   Texture Variants (Enhanced)
================================ */

/* Shared texture tuning */
.paper-stack-texture-grain .paper-stack-layer,
.paper-stack-texture-grain .paper-stack-content,
.paper-stack-texture-linen .paper-stack-layer,
.paper-stack-texture-linen .paper-stack-content,
.paper-stack-texture-fiber .paper-stack-layer,
.paper-stack-texture-fiber .paper-stack-content {
  background-blend-mode: multiply;
}

/* ---------- Grain ---------- */
.paper-stack-texture-grain .paper-stack-layer,
.paper-stack-texture-grain .paper-stack-content {
  background-image:
    radial-gradient(circle at 1px 1px, rgba(0,0,0,0.06) 1px, transparent 1px),
    radial-gradient(circle at 3px 3px, rgba(0,0,0,0.03) 1px, transparent 1px);
  background-size: 18px 18px, 24px 24px;
}

/* ---------- Linen ---------- */
.paper-stack-texture-linen .paper-stack-layer,
.paper-stack-texture-linen .paper-stack-content {
  background-image:
    repeating-linear-gradient(
      45deg,
      rgba(0,0,0,0.035),
      rgba(0,0,0,0.035) 1px,
      transparent 1px,
      transparent 4px
    ),
    repeating-linear-gradient(
      -45deg,
      rgba(0,0,0,0.025),
      rgba(0,0,0,0.025) 1px,
      transparent 1px,
      transparent 5px
    );
  background-size: auto;
}

/* ---------- Fiber ---------- */
.paper-stack-texture-fiber .paper-stack-layer,
.paper-stack-texture-fiber .paper-stack-content {
  background-image:
    repeating-linear-gradient(
      0deg,
      rgba(0,0,0,0.035),
      rgba(0,0,0,0.035) 1px,
      transparent 1px,
      transparent 3px
    ),
    repeating-linear-gradient(
      90deg,
      rgba(0,0,0,0.025),
      rgba(0,0,0,0.025) 1px,
      transparent 1px,
      transparent 4px
    );
}

/* Interactive Stacks */
.paper-stack-interactive {
  @apply cursor-pointer transition-transform duration-200 ease-out;
}

.paper-stack-interactive:hover {
  transform: translateY(-2px);
}

.paper-stack-interactive:hover .paper-stack-layer-1 {
  transform: 
    translate(calc(var(--stack-offset) * 2.5), calc(var(--stack-offset) * 2.5))
    rotate(calc(var(--stack-rotation) * -1.2));
}

.paper-stack-interactive:hover .paper-stack-layer-2 {
  transform: 
    translate(calc(var(--stack-offset) * 1.2), calc(var(--stack-offset) * 1.2))
    rotate(calc(var(--stack-rotation) * 1.2));
}

.paper-stack-interactive:active {
  transform: translateY(0);
}

/* Dark Mode */
@media (prefers-color-scheme: dark) {
  .paper-stack-layer,
  .paper-stack-content {
    @apply bg-gray-800 border-gray-700;
  }
  
  .paper-stack-texture-grain .paper-stack-layer,
  .paper-stack-texture-grain .paper-stack-content {
    background-image: 
      radial-gradient(circle at 1px 1px, rgba(255,255,255,0.02) 1px, transparent 0);
  }
  
  .paper-stack-texture-linen .paper-stack-layer,
  .paper-stack-texture-linen .paper-stack-content {
    background-image: 
      repeating-linear-gradient(
        45deg,
        transparent,
        transparent 2px,
        rgba(255,255,255,0.01) 2px,
        rgba(255,255,255,0.01) 4px
      );
  }
  
  .paper-stack-texture-fiber .paper-stack-layer,
  .paper-stack-texture-fiber .paper-stack-content {
    background-image: 
      repeating-linear-gradient(
        0deg,
        transparent,
        transparent 1px,
        rgba(255,255,255,0.015) 1px,
        rgba(255,255,255,0.015) 2px
      ),
      repeating-linear-gradient(
        90deg,
        transparent,
        transparent 1px,
        rgba(255,255,255,0.015) 1px,
        rgba(255,255,255,0.015) 2px
      );
  }
}