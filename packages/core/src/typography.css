/* =========================================================
   Dav/Devs Paper â€” Typography
   ========================================================= */

/* -------------------------------
   Base Defaults
-------------------------------- */
:where(body) {
  font-family: var(--body-font, var(--font-sans));
  font-size: var(--body-size, var(--text-base));
  font-weight: var(--body-weight, var(--font-weight-regular, 400));
  font-style: var(--body-style, normal);
  line-height: var(--body-leading, var(--leading-relaxed, 1.65));
  letter-spacing: var(--body-tracking, var(--tracking-normal, 0));
  color: var(--text-primary, var(--color-gray-900));
}

/* Paper/dark mode friendly defaults */
:where(.dark body) {
  color: var(--text-inverse, var(--color-gray-100));
}

/* -------------------------------
   Headings (global)
-------------------------------- */
:where(h1, h2, h3, h4, h5, h6) {
  font-family: var(--heading-font, var(--font-serif));
  font-weight: var(--heading-weight, var(--font-weight-bold, 700));
  font-style: var(--heading-style, normal);
  line-height: var(--heading-leading, var(--leading-tight, 1.15));
  letter-spacing: var(--heading-tracking, var(--tracking-tight, -0.02em));
  text-wrap: balance;
  margin: 0;
  color: currentColor;
}

/* -------------------------------
   Default sizes (HTML headings)
-------------------------------- */
:where(h1) { font-size: var(--text-5xl); }
:where(h2) { font-size: var(--text-4xl); }
:where(h3) { font-size: var(--text-3xl); }
:where(h4) { font-size: var(--text-2xl); }
:where(h5) { font-size: var(--text-xl); }
:where(h6) { font-size: var(--text-lg); }

/* -------------------------------
   Text utilities (class-based)
-------------------------------- */

/* Core text */
.text {
  font-family: var(--body-font, var(--font-sans));
  line-height: var(--body-leading, var(--leading-relaxed, 1.65));
  color: var(--text-primary, var(--color-gray-900));
}

.dark .text {
  color: var(--text-inverse, var(--color-gray-100));
}

/* Size variants */
.text-xs { font-size: var(--text-xs); }
.text-sm { font-size: var(--text-sm); }
.text-base { font-size: var(--text-base); }
.text-lg { font-size: var(--text-lg); }
.text-xl { font-size: var(--text-xl); }

/* Tone variants */
.text-muted { color: var(--text-secondary, var(--color-gray-600)); }
.dark .text-muted { color: var(--color-gray-300); }

.text-subtle { color: var(--text-tertiary, var(--color-gray-400)); }
.dark .text-subtle { color: var(--color-gray-400); }

/* Lead text (hero intros) */
.lead {
  font-size: var(--text-xl);
  line-height: var(--leading-relaxed, 1.65);
  color: var(--text-primary, var(--color-gray-900));
}
.dark .lead { color: var(--text-inverse, var(--color-gray-100)); }

/* Small text */
.small {
  font-size: var(--text-sm);
  line-height: var(--leading-normal, 1.5);
}

/* Serif toggle (editorial sections) */
.serif {
  font-family: var(--font-serif);
}

/* Mono inline code */
.code-inline {
  font-family: var(--code-font, var(--font-mono));
  font-size: 0.95em;
  padding: 0.15em 0.35em;
  border-radius: var(--radius-sm, 0.25rem);
  background: color-mix(in srgb, currentColor 8%, transparent);
}

/* -------------------------------
   Links
-------------------------------- */
:where(a) {
  color: var(--brand-primary, var(--color-blue-600));
  text-decoration: underline;
  text-underline-offset: 0.2em;
  text-decoration-thickness: 1px;
}
:where(a:hover) {
  color: var(--brand-primary-hover, var(--color-blue-700));
}

/* -------------------------------
   Blockquote
-------------------------------- */
.blockquote {
  margin: 0;
  padding-left: var(--space-4);
  border-left: 3px solid var(--border-primary, var(--color-gray-200));
  color: var(--text-secondary, var(--color-gray-600));
  font-style: italic;
}
.dark .blockquote {
  border-left-color: var(--color-gray-700);
  color: var(--color-gray-300);
}

/* -------------------------------
   Prose (MDX / content)
-------------------------------- */
.prose {
  max-width: var(--max-width-prose, 65ch);
  color: var(--text-primary, var(--color-gray-900));
  font-family: var(--body-font, var(--font-sans));
  line-height: var(--leading-loose, 1.8);
}

.dark .prose {
  color: var(--text-inverse, var(--color-gray-100));
}

.prose :where(p) {
  margin: 0;
}

.prose :where(p + p) {
  margin-top: var(--space-4);
}

/* Lists */
.prose :where(ul, ol) {
  padding-left: 1.25em;
  margin: 0;
}
.prose :where(li + li) {
  margin-top: var(--space-2);
}

/* Code blocks */
.prose :where(pre) {
  margin: var(--space-6) 0;
  padding: var(--space-4);
  border-radius: var(--radius-lg);
  border: 1px solid var(--border-primary, var(--color-gray-200));
  background: var(--surface-secondary, var(--color-gray-50));
  overflow: auto;
}
.dark .prose :where(pre) {
  border-color: var(--color-gray-700);
  background: var(--color-gray-900);
}

/* Inline code inside prose */
.prose :where(code:not(pre code)) {
  font-family: var(--code-font, var(--font-mono));
  font-size: 0.95em;
  padding: 0.15em 0.35em;
  border-radius: var(--radius-sm, 0.25rem);
  background: color-mix(in srgb, currentColor 10%, transparent);
}

/* Headings inside prose */
.prose :where(h2) { margin-top: var(--space-10); margin-bottom: var(--space-3); }
.prose :where(h3) { margin-top: var(--space-8);  margin-bottom: var(--space-2); }
.prose :where(h4) { margin-top: var(--space-6);  margin-bottom: var(--space-2); }

/* Horizontal rule */
.prose :where(hr) {
  border: none;
  border-top: 1px solid var(--border-primary, var(--color-gray-200));
  margin: var(--space-8) 0;
}
.dark .prose :where(hr) {
  border-top-color: var(--color-gray-700);
}

/* Images */
.prose :where(img) {
  max-width: 100%;
  border-radius: var(--radius-lg);
}

/* Tables */
.prose :where(table) {
  width: 100%;
  border-collapse: collapse;
  margin: var(--space-6) 0;
}

.prose :where(th, td) {
  padding: var(--space-2) var(--space-3);
  border: 1px solid var(--border-primary, var(--color-gray-200));
}

.dark .prose :where(th, td) {
  border-color: var(--color-gray-700);
}

/* -------------------------------
   Print Safety
-------------------------------- */
@media print {
  .prose, .text, .lead {
    color: #000 !important;
  }
  a {
    color: #000 !important;
    text-decoration: underline !important;
  }
}
